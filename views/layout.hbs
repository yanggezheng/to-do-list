<!doctype html>
<html>

<head>
	<meta charset="utf-8">
	<title></title>
	<link rel="stylesheet" href="../css/site.css" type="text/css" media="screen" title="no title" charset="utf-8">
</head>

<body>
	<div id="outer">
		<header>
			<nav>
				<span class="home-link"><a href="/">Home</a> {{#if user}}| <a href="/article/add">Add</a>{{/if}}</span>
				<span class="login-status">
					{{#if user}}
					Logged in as: {{user.username}}
					{{else}}
					<a href="/register">Register</a> or <a href="/login">Login</a>
					{{/if}}
				</span>
			</nav>
		</header>
		<h1>Welcome back</h1>
		<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js"
			integrity="sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3"
			crossorigin="anonymous"></script>
		<h1>This is your TODO list</h1>
		<div class="content">
			Log in to view your task!
			{{{ body }}}
		</div>
	</div>
	<script src="main.js" type="module" defer></script>
	<script src=http://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js></script>
	<p> There are <span class='number'></span> user viewing the to do list</p>
	<script>
		(function () {
			const poll = function () {
				jQuery.ajax({
					url: 'users.json',
					dataType: 'json',
					type: 'get',
					success: function (data) {
						jQuery('.number').text(data.time);
					},
				});
			}
			poll();
			setInterval(function () {
				poll();
			}, 2000);
		})();
	</script>

</body>

</html>